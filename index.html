<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalDef - Calorie Deficit Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">
                <i class="fas fa-chart-line"></i>
                <h1>CalDef</h1>
            </div>
            <div class="splash-tagline">
                <p data-translate="splash_tagline">Your Personal Calorie Deficit Tracker</p>
            </div>
            <div class="loading-animation">
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span data-translate="app_title">CalDef</span>
                </h1>
                <div class="header-controls">
                    <button id="themeToggle" class="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Page 1: User Setup -->
            <section id="setupPage" class="page active">
                <div class="container">
                    <div class="setup-card">

                        
                        <div class="welcome-section">
                            <h2>Welcome to Caldef</h2>
                            <p data-translate="setup_subtitle">Let's calculate your daily calorie needs based on your profile</p>
                        </div>
                        
                        <form id="setupForm" class="setup-form">
                            <div class="personal-info-section">
                                <h3 data-translate="personal_info">Personal Information</h3>
                                <div class="form-row three-columns">
                                    <div class="form-group">
                                        <label data-translate="name">Name</label>
                                        <div class="autocomplete-container">
                                            <input type="text" id="userName" placeholder="Enter your name" data-translate-placeholder="name_placeholder" required autocomplete="off">
                                            <div id="nameAutocomplete" class="autocomplete-dropdown" style="display: none;"></div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label data-translate="gender">Gender</label>
                                        <select id="gender" required>
                                            <option value="" data-translate="select_option">Select...</option>
                                            <option value="male" data-translate="male">Male</option>
                                            <option value="female" data-translate="female">Female</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label data-translate="age">Age</label>
                                        <input type="number" id="age" min="10" max="120" placeholder="25" data-translate-placeholder="age_placeholder" required>
                                    </div>
                                </div>
                            </div>

                            <div class="body-measurements-section">
                                <h3 data-translate="body_measurements">Body Measurements</h3>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label data-translate="height">Height</label>
                                        <div class="input-with-unit">
                                            <input type="number" id="height" min="100" max="250" placeholder="170" data-translate-placeholder="height_placeholder" required>
                                            <select id="heightUnit">
                                                <option value="cm">cm</option>
                                                <option value="in">in</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label data-translate="current_weight">Current Weight</label>
                                        <div class="input-with-unit">
                                            <input type="number" id="currentWeight" min="30" max="300" step="0.1" placeholder="70.0" data-translate-placeholder="weight_placeholder" required>
                                            <select id="weightUnit">
                                                <option value="kg">kg</option>
                                                <option value="lbs">lbs</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="goals-section">
                                <h3 data-translate="goals_preferences">Goals & Preferences</h3>
                                <div class="form-row three-columns">
                                    <div class="form-group">
                                        <label data-translate="target_weight">Target Weight</label>
                                        <div class="input-with-unit">
                                            <input type="number" id="targetWeight" min="30" max="300" step="0.1" placeholder="65.0" data-translate-placeholder="target_weight_placeholder" required>
                                            <span class="unit-display" id="targetWeightUnit">kg</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label data-translate="time_goal">Time Goal</label>
                                        <select id="timeGoal" required>
                                            <option value="" data-translate="select_option">Select...</option>
                                            <option value="2" data-translate="two_weeks">2 Weeks</option>
                                            <option value="4" data-translate="one_month">1 Month</option>
                                            <option value="8" data-translate="two_months">2 Months</option>
                                            <option value="12" data-translate="three_months">3 Months</option>
                                            <option value="24" data-translate="six_months">6 Months</option>
                                            <option value="52" data-translate="one_year">1 Year</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label data-translate="activity_level">Activity Level</label>
                                        <select id="activityLevel" required>
                                            <option value="" data-translate="select_option">Select...</option>
                                            <option value="1.2" data-translate="sedentary">Sedentary</option>
                                            <option value="1.375" data-translate="light">Light Activity</option>
                                            <option value="1.55" data-translate="moderate">Moderate Activity</option>
                                            <option value="1.725" data-translate="active">Very Active</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="btn-primary" data-translate="calculate_goals">
                                <i class="fas fa-calculator"></i>
                                Calculate My Goals
                            </button>
                        </form>
                        
                        <!-- Results Section (hidden initially) -->
                        <div id="setupResults" class="setup-results" style="display: none;">
                            <h3 data-translate="your_results">Your Results</h3>
                            
                            <!-- Calorie Goal Display -->
                            <div class="result-card">
                                <div class="result-header">
                                    <h4 data-translate="daily_calorie_goal">Daily Calorie Goal</h4>
                                    <div class="result-value" id="setupCalorieGoal">0</div>
                                    <p class="result-subtitle" data-translate="calories_per_day">calories per day</p>
                                </div>
                            </div>
                            
                            <!-- Weight Progress Chart -->
                            <div class="result-card">
                                <h4 data-translate="weight_progress_preview">Weight Progress Preview</h4>
                                <div class="chart-container">
                                    <div class="chart-placeholder">
                                        <p data-translate="chart_preview_text">Your weight progress chart will be available in the tracker</p>
                                        <canvas id="setupProgressCanvas" width="400" height="200" style="display: none;"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Navigation Button -->
                            <button id="calculateFoodsBtn" class="btn-primary" style="margin-top: 1rem;">
                                <i class="fas fa-utensils"></i>
                                <span data-translate="calculate_foods">Calculate My Foods</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Page 2: Food Tracker -->
            <section id="trackerPage" class="page">
                <div class="container">
                    <!-- Pinned Notification -->
                    <div class="pinned-notification">
                        <div class="notification-content">
                            <i class="fas fa-info-circle"></i>
                            <span data-translate="daily_reminder">Track your meals to stay on target with your calorie goals!</span>
                        </div>
                    </div>

                    <!-- Food Entry Form -->
                    <div class="food-entry-card">
                        <h3 data-translate="add_food">Add Food Entry</h3>
                        <form id="foodForm" class="food-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label data-translate="meal_type">Meal Type</label>
                                    <select id="mealType" required>
                                        <option value="" data-translate="select_meal_type">Select Meal Type</option>
                                        <option value="breakfast" data-translate="breakfast">Breakfast</option>
                                        <option value="lunch" data-translate="lunch">Lunch</option>
                                        <option value="dinner" data-translate="dinner">Dinner</option>
                                        <option value="snack" data-translate="snack">Snack</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label data-translate="food_category">Food Category</label>
                                    <select id="foodCategory" onchange="calorieTracker.updateSpecificTypes(this.value)" required>
                                        <option value="" data-translate="select_option">Select...</option>
                                        <option value="egg" data-translate="egg">Egg</option>
                                        <option value="bread" data-translate="bread">Bread</option>
                                        <option value="chicken" data-translate="chicken">Chicken</option>
                                        <option value="potato" data-translate="potato">Potato</option>
                                        <option value="fruit" data-translate="fruit">Fruit</option>
                                        <option value="pasta" data-translate="pasta">Pasta</option>
                                        <option value="rice" data-translate="rice">Rice</option>
                                        <option value="vegetable" data-translate="vegetable">Vegetable</option>
                                        <option value="pancake" data-translate="pancake">Pancake</option>
                                        <option value="cake" data-translate="cake">Cake</option>
                                        <option value="salad" data-translate="salad">Salad</option>
                                        <option value="international_cuisines" data-translate="international_cuisines">International Cuisine</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label data-translate="specific_type">Specific Type</label>
                                    <select id="specificType" onchange="calorieTracker.displayRecipe(this.value)" required>
                                        <option value="" data-translate="select_category_first">Select category first</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label data-translate="quantity">Quantity</label>
                                    <div class="input-with-unit">
                                        <input type="number" id="quantity" min="0.1" step="0.1" placeholder="Enter the amount" data-translate-placeholder="enter_amount" required>
                                        <select id="unit">
                                            <option value="" data-translate="select_type">Select type</option>
                                            <option value="g">g</option>
                                            <option value="ml">ml</option>
                                            <option value="pcs" data-translate="pieces">pcs</option>
                                            <option value="cup" data-translate="cup">cup</option>
                                            <option value="tbsp" data-translate="tablespoon">tbsp</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="btn-primary" data-translate="add_entry">
                                <i class="fas fa-plus"></i>
                                Add Entry
                            </button>
                        </form>
                    </div>

                    <!-- Today's Food Log -->
                    <div class="todays-food-log">
                        <div class="section-header">
                            <h3 data-translate="todays_food_log">Today's Food Log</h3>
                            <div class="daily-total">
                                <span data-translate="total">Total:</span>
                                <span id="dailyTotalCalories" class="total-calories">0 kcal</span>
                            </div>
                        </div>
                        
                        <div class="food-entries-container" id="todaysFoodEntries">
                            <!-- Today's food entries will be populated here -->
                        </div>
                    </div>

                    <!-- Daily Calorie Goal Section -->
                    <div class="daily-calorie-goal-section">
                        <div class="goal-card">
                            <div class="goal-header">
                                <h3 data-translate="daily_calorie_goal">Daily Calorie Goal</h3>
                                <div class="goal-value" id="trackerCalorieGoal">0</div>
                                <p class="goal-subtitle" data-translate="calories_per_day">calories per day</p>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Metrics Section -->
                    <div class="metrics-section">
                        <h3 data-translate="metrics_overview">Metrics Overview</h3>
                        <div class="metrics-grid">
                            <div class="metric-box">
                                <div class="metric-icon">
                                    <i class="fas fa-fire"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value" id="totalConsumedCalories">0</div>
                                    <div class="metric-label" data-translate="total_consumed">Total Consumed</div>
                                </div>
                            </div>
                            
                            <div class="metric-box">
                                <div class="metric-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value" id="daysConsumed">0</div>
                                    <div class="metric-label" data-translate="days_consumed">Days Consumed</div>
                                </div>
                            </div>
                            
                            <div class="metric-box">
                                <div class="metric-icon">
                                    <i class="fas fa-hourglass-half"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value" id="daysRemaining">0</div>
                                    <div class="metric-label" data-translate="days_remaining">Days Remaining</div>
                                </div>
                            </div>
                            
                            <div class="metric-box">
                                <div class="metric-icon">
                                    <i class="fas fa-bullseye"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value" id="calorieGoalAmount">0</div>
                                    <div class="metric-label" data-translate="calorie_goal_amount">Calorie Goal</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Notes Section -->
                    <div class="daily-notes-section">
                        <div class="notes-header">
                            <h3 data-translate="daily_notes">Daily Notes</h3>
                            <button class="btn-secondary" id="notesHistoryBtn">
                                <i class="fas fa-history"></i>
                                <span data-translate="history">History</span>
                            </button>
                        </div>
                        
                        <div class="notes-content">
                            <textarea id="dailyNotes" placeholder="Add your daily notes, symptoms, or observations..." data-translate-placeholder="notes_placeholder"></textarea>
                            <button class="btn-primary" id="saveNotesBtn">
                                <i class="fas fa-save"></i>
                                <span data-translate="save_notes">Save Notes</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>


        </main>

        <!-- Navigation -->
        <nav class="bottom-nav">
            <button id="navSetup" class="nav-item active" data-page="setupPage">
                <i class="fas fa-user-cog"></i>
                <span data-translate="setup">Setup</span>
            </button>
            <button id="navTracker" class="nav-item" data-page="trackerPage">
                <i class="fas fa-utensils"></i>
                <span data-translate="tracker">Tracker</span>
            </button>
        </nav>
    </div>

    <script src="translations.js"></script>
    <script src="foodData.js"></script>
    <script src="script.js"></script>
</body>
</html>